<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº”è¡Œä½“è´¨æµ‹è¯• - ä¼˜åŒ–ç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 850px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            position: relative;
        }
        
        header {
            background: linear-gradient(to right, #8e3b1c, #b35738);
            color: white;
            text-align: center;
            padding: 30px 20px;
            position: relative;
        }
        
        header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        
        header p {
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
        }
        
        .progress-container {
            background: rgba(255, 255, 255, 0.2);
            height: 10px;
            border-radius: 5px;
            margin: 25px auto 0;
            max-width: 90%;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: white;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 5px;
        }
        
        .test-container {
            padding: 25px;
        }
        
        .round-info {
            text-align: center;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }
        
        .round-number {
            background: #8e3b1c;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .round-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #444;
        }
        
        .elements-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }
        
        @media (max-width: 768px) {
            .elements-container {
                grid-template-columns: 1fr;
            }
        }
        
        .element-group {
            background: #f9f9f9;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        
        .element-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .element-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .liver .element-icon { background: #4CAF50; }   /* è‚-æœ¨-ç»¿è‰² */
        .heart .element-icon { background: #F44336; }   /* å¿ƒ-ç«-çº¢è‰² */
        .spleen .element-icon { background: #FFC107; }  /* è„¾-åœŸ-é»„è‰² */
        .lung .element-icon { background: #9E9E9E; }    /* è‚º-é‡‘-ç°è‰² */
        .kidney .element-icon { background: #2196F3; }  /* è‚¾-æ°´-è“è‰² */
        
        .element-questions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .question {
            padding: 12px;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #ddd;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            align-items: flex-start;
        }
        
        .question:hover {
            background: #f0f7ff;
            border-left-color: #8e3b1c;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        }
        
        .question input {
            margin-right: 12px;
            margin-top: 5px;
            cursor: pointer;
            width: 22px;
            height: 22px;
            min-width: 22px;
            min-height: 22px;
        }
        
        .question label {
            flex: 1;
            cursor: pointer;
            font-size: 1.05rem;
            line-height: 1.4;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }
        
        .nav-btn {
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .prev-btn {
            background: #f1f1f1;
            color: #555;
        }
        
        .prev-btn:hover:not(:disabled) {
            background: #e0e0e0;
            transform: translateX(-5px);
        }
        
        .next-btn {
            background: linear-gradient(to right, #8e3b1c, #b35738);
            color: white;
        }
        
        .next-btn:hover:not(:disabled) {
            transform: translateX(5px);
            box-shadow: 0 6px 20px rgba(142, 59, 28, 0.4);
        }
        
        .submit-btn {
            background: linear-gradient(to right, #2e7d32, #4CAF50);
            color: white;
            width: 100%;
        }
        
        .submit-btn:hover {
            transform: scale(1.03);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        
        #result {
            display: none;
            text-align: center;
            padding: 30px;
            animation: fadeIn 1s ease;
        }
        
        .result-title {
            font-size: 2rem;
            color: #8e3b1c;
            margin-bottom: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }
        
        .radar-container {
            margin: 20px auto;
            position: relative;
            height: 350px;
            max-width: 500px;
        }
        
        .interpretation {
            background: linear-gradient(to right, #f8f5f0, #f0e6d8);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            font-size: 1.1rem;
            border: 2px solid #e8e0d4;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .dominant-element {
            font-weight: bold;
            color: #8e3b1c;
            font-size: 1.3rem;
            text-decoration: underline;
            text-underline-offset: 5px;
        }
        
        .retry-btn {
            background: linear-gradient(to right, #2196F3, #21CBF3);
            color: white;
            margin-top: 25px;
            width: 100%;
            padding: 16px;
        }
        
        .retry-btn:hover {
            transform: scale(1.03);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .element-explanation {
            font-size: 0.95rem;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background: #f8f5f0;
            color: #777;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                border-radius: 15px;
            }
            
            header {
                padding: 25px 15px;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
            
            .test-container {
                padding: 20px 15px;
            }
            
            .round-title {
                font-size: 1.2rem;
            }
            
            .element-title {
                font-size: 1.1rem;
            }
            
            .question label {
                font-size: 1rem;
            }
            
            .nav-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .result-title {
                font-size: 1.7rem;
            }
        }
        
        @media (max-width: 480px) {
            .nav-btn {
                padding: 10px 15px;
                font-size: 0.95rem;
            }
            
            .round-info {
                flex-direction: column;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-leaf"></i> äº”è¡Œä½“è´¨æµ‹è¯•</h1>
            <p>æ¢ç´¢æ‚¨çš„äº”è¡Œèƒ½é‡å¹³è¡¡ï¼Œäº†è§£ä½“è´¨ç‰¹å¾ä¸å¥åº·å»ºè®®</p>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </header>
        
        <div class="test-container" id="test">
            <div class="round-info">
                <div class="round-number" id="round-number">1</div>
                <div class="round-title" id="round-title">ç¬¬ä¸€è½®ï¼šäº”è¡ŒåŸºç¡€èƒ½é‡è¯„ä¼°</div>
            </div>
            
            <div class="elements-container" id="questions-container">
                <!-- é¢˜ç›®ä¼šåŠ¨æ€åŠ è½½ -->
            </div>
            
            <div class="navigation">
                <button class="nav-btn prev-btn" id="prev-btn" disabled>
                    <i class="fas fa-arrow-left"></i> ä¸Šä¸€è½®
                </button>
                <button class="nav-btn next-btn" id="next-btn">
                    ä¸‹ä¸€è½® <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
        
        <div id="result">
            <div class="result-title">
                <i class="fas fa-chart-pie"></i> æ‚¨çš„äº”è¡Œä½“è´¨åˆ†æ
            </div>
            <div class="radar-container">
                <canvas id="radar-chart" width="400" height="400"></canvas>
            </div>
            <div class="interpretation">
                <p>æ‚¨çš„ä½“è´¨ç‰¹å¾ä¸­ï¼Œ<span id="dominant-element" class="dominant-element">è‚ï¼ˆæœ¨ï¼‰</span>èƒ½é‡æœ€ä¸ºçªå‡º</p>
                <p>è¿™è¡¨ç¤ºæ‚¨å¯èƒ½æœ‰è¾ƒå¼ºçš„åˆ›é€ åŠ›ä½†å®¹æ˜“å—å‹åŠ›å½±å“ï¼Œå»ºè®®å¤šè¿›è¡Œæ”¾æ¾æ´»åŠ¨ï¼Œå¦‚ç‘œä¼½ã€å†¥æƒ³ç­‰ã€‚åŒæ—¶æ³¨æ„ä¿æŠ¤çœ¼ç›ï¼Œé€‚å½“è¡¥å……å¯Œå«ç»´ç”Ÿç´ Açš„é£Ÿç‰©ã€‚</p>
            </div>
            <button class="nav-btn retry-btn" id="retry-btn">
                <i class="fas fa-redo"></i> é‡æ–°æµ‹è¯•
            </button>
        </div>
        
        <footer>
            <p>æœ¬æµ‹è¯•åŸºäºä¸­åŒ»äº”è¡Œç†è®ºè®¾è®¡ï¼Œç»“æœä»…ä¾›å‚è€ƒ | Â© 2023 äº”è¡Œä½“è´¨åˆ†æ</p>
        </footer>
    </div>

    <script>
        // é¢˜ç›®æ•°æ® - æ¯è½®15é¢˜ï¼ˆå¿ƒã€è‚ã€è„¾ã€è‚ºã€è‚¾å„3é¢˜ï¼‰ï¼Œå…±5è½®
        const questionsData = [
            // ç¬¬1è½®
            [
                // è‚ï¼ˆæœ¨ï¼‰3é¢˜
                {
                    element: "liver",
                    text: "ç»å¸¸å› ä¸ºå‹åŠ›è¿‡å¤§è€Œèº«ä½“ä¸å¥½"
                },
                {
                    element: "liver",
                    text: "å¶å°”æœ‰è´«è¡€ã€çœ©æ™•ç­‰ç—‡çŠ¶äºŒçƒ¦èºæ˜“æ€’"
                },
                {
                    element: "liver",
                    text: "æœ‰æ—¶ä¼šçªç„¶è§‰å¾—æ‚²ä»ä¸­æ¥ï¼Œæ½¸ç„¶æ³ªä¸‹"
                },
                
                // å¿ƒï¼ˆç«ï¼‰3é¢˜
                {
                    element: "heart",
                    text: "å¶å°”ä¼šæœ‰å¿ƒæ‚¸å’Œæ°”å–˜çš„ç—‡çŠ¶"
                },
                {
                    element: "heart",
                    text: "å®¹æ˜“å¥å¿˜"
                },
                {
                    element: "heart",
                    text: "å®¹æ˜“å…´å¥‹"
                },
                
                // è„¾ï¼ˆåœŸï¼‰3é¢˜
                {
                    element: "spleen",
                    text: "ç»å¸¸èƒƒç—›"
                },
                {
                    element: "spleen",
                    text: "è‚¤è‰²åé»„"
                },
                {
                    element: "spleen",
                    text: "çˆ±åƒç”œé£Ÿ"
                },
                
                // è‚ºï¼ˆé‡‘ï¼‰3é¢˜
                {
                    element: "lung",
                    text: "æœ‰è¿‡æ•ç—‡"
                },
                {
                    element: "lung",
                    text: "æ­»å¿ƒçœ¼"
                },
                {
                    element: "lung",
                    text: "é‡äº‹æ‚²è§‚"
                },
                
                // è‚¾ï¼ˆæ°´ï¼‰3é¢˜
                {
                    element: "kidney",
                    text: "æ‰‹è„šå’Œè„¸éƒ¨å®¹æ˜“å‘çƒ­"
                },
                {
                    element: "kidney",
                    text: "ç»å¸¸ä¼šè¢«å°äº‹æƒŠå“"
                },
                {
                    element: "kidney",
                    text: "æ–¤æ–¤è®¡è¾ƒ"
                }
            ],
            // ç¬¬2è½®
            [
                // è‚ï¼ˆæœ¨ï¼‰3é¢˜
                {
                    element: "liver",
                    text: "è®¨åŒå¹ç©ºè°ƒ"
                },
                {
                    element: "liver",
                    text: "èƒ½å¤Ÿçœ‹åˆ°è„¸ä¸Šçš„é™è„‰"
                },
                {
                    element: "liver",
                    text: "çˆ±åƒé…¸çš„é£Ÿç‰©"
                },
                
                // å¿ƒï¼ˆç«ï¼‰3é¢˜
                {
                    element: "heart",
                    text: "ç»å¸¸è§‰å¾—ä¸å®‰"
                },
                {
                    element: "heart",
                    text: "å°‘é‡è¿åŠ¨å°±ä¼šå‡ºæ±—"
                },
                {
                    element: "heart",
                    text: "å†¬å­£æ‰‹è„šå˜çº¢ï¼Œæ˜“ç”Ÿç™½å‘ï¼Œæ˜“å—ä¼¤"
                },
                
                // è„¾ï¼ˆåœŸï¼‰3é¢˜
                {
                    element: "spleen",
                    text: "è™šèƒ–"
                },
                {
                    element: "spleen",
                    text: "æ‹…å¿ƒè„¸éƒ¨æ¾å¼›"
                },
                {
                    element: "spleen",
                    text: "æ‹…å¿ƒä¼šæœ‰å£è‡­"
                },
                
                // è‚ºï¼ˆé‡‘ï¼‰3é¢˜
                {
                    element: "lung",
                    text: "çš®è‚¤å¹²ç‡¥"
                },
                {
                    element: "lung",
                    text: "è‚¤è‰²å¾ˆç™½"
                },
                {
                    element: "lung",
                    text: "èŠ±ç²‰ç—‡"
                },
                
                // è‚¾ï¼ˆæ°´ï¼‰3é¢˜
                {
                    element: "kidney",
                    text: "è…°è…¿æ— åŠ›ï¼Œæ€•å¯’"
                },
                {
                    element: "kidney",
                    text: "æ‚£æœ‰æ…¢æ€§ç–¾ç—…ï¼Œä¸€æ—¦ç”Ÿç—…å¾ˆéš¾åº·å¤"
                },
                {
                    element: "kidney",
                    text: "è‚¤è‰²åé»‘"
                }
            ],
            // ç¬¬3è½®
            [
                // è‚ï¼ˆæœ¨ï¼‰3é¢˜
                {
                    element: "liver",
                    text: "çœ¼ç›å¾ˆå®¹æ˜“ç–²åŠ³ï¼Œè§†åŠ›ä¸å¤ªå¥½"
                },
                {
                    element: "liver",
                    text: "æŒ‡ç”²æ˜“æ–­ï¼Œç”²é¢æœ‰ç«–çº¿"
                },
                {
                    element: "liver",
                    text: "ç»å¸¸è„šæŠ½ç­‹"
                },
                
                // å¿ƒï¼ˆç«ï¼‰3é¢˜
                {
                    element: "heart",
                    text: "ç»å¸¸å–å’–å•¡"
                },
                {
                    element: "heart",
                    text: "èˆŒéƒ¨æ˜“æ‚£å£è…”æºƒç–¡"
                },
                {
                    element: "heart",
                    text: "è„¸éƒ¨ç»å¸¸å‘çº¢å‘çƒ­"
                },
                
                // è„¾ï¼ˆåœŸï¼‰3é¢˜
                {
                    element: "spleen",
                    text: "ç»å¸¸åœ¨å¤–åƒé¥­ï¼Œå®¹æ˜“æš´é¥®æš´é£Ÿ"
                },
                {
                    element: "spleen",
                    text: "ç»å¸¸è…¹æ³»æˆ–ä¾¿ç§˜"
                },
                {
                    element: "spleen",
                    text: "é£Ÿæ¬²æ—ºç››å’Œæ²¡æœ‰é£Ÿæ¬²æ—¶ï¼Œé£Ÿé‡å·®è·å¾ˆå¤§"
                },
                
                // è‚ºï¼ˆé‡‘ï¼‰3é¢˜
                {
                    element: "lung",
                    text: "æ‹…å¿ƒä¼šé•¿çš±çº¹"
                },
                {
                    element: "lung",
                    text: "å®¹æ˜“ç–²åŠ³"
                },
                {
                    element: "lung",
                    text: "ç»å¸¸å—“å­ç–¼"
                },
                
                // è‚¾ï¼ˆæ°´ï¼‰3é¢˜
                {
                    element: "kidney",
                    text: "çˆ±åƒå’¸çš„é£Ÿç‰©"
                },
                {
                    element: "kidney",
                    text: "å¶å°”è€³å‘œ"
                },
                {
                    element: "kidney",
                    text: "å®¹æ˜“è„±å‘å’Œç”Ÿç™½å‘"
                }
            ],
            // ç¬¬4è½®
            [
                // è‚ï¼ˆæœ¨ï¼‰3é¢˜
                {
                    element: "liver",
                    text: "åœ¨æ˜¥å¤ä¹‹äº¤çš„äº”æœˆä»½ï¼Œå®¹æ˜“äº§ç”ŸåŒå€¦ã€æ˜“ç–²åŠ³çš„æƒ…ç»ªé—®é¢˜"
                },
                {
                    element: "liver",
                    text: "è‚©éƒ¨å’Œé¢ˆéƒ¨ç»å¸¸é…¸ç—›"
                },
                {
                    element: "liver",
                    text: "PMSï¼ˆæœˆç»å‰æœŸç»¼åˆå¾ï¼‰å¾ˆä¸¥é‡"
                },
                
                // å¿ƒï¼ˆç«ï¼‰3é¢˜
                {
                    element: "heart",
                    text: "è¡€æ¶²å¾ªç¯æ¯”è¾ƒå·®ï¼Œæ‰‹è„šå†°å†·"
                },
                {
                    element: "heart",
                    text: "æ€•çƒ­"
                },
                {
                    element: "heart",
                    text: "éš¾ä»¥å…¥ç¡ä¸”ç¡çœ å¾ˆæµ…"
                },
                
                // è„¾ï¼ˆåœŸï¼‰3é¢˜
                {
                    element: "spleen",
                    text: "å˜´è§’æ˜“ç ´"
                },
                {
                    element: "spleen",
                    text: "æ‰‹è„šæ— åŠ›"
                },
                {
                    element: "spleen",
                    text: "å¥½ç®¡é—²äº‹"
                },
                
                // è‚ºï¼ˆé‡‘ï¼‰3é¢˜
                {
                    element: "lung",
                    text: "å¤´å‘æ²¡æœ‰å…‰æ³½"
                },
                {
                    element: "lung",
                    text: "è‚Œè‚¤é—®é¢˜æ¯”è¾ƒå¤š"
                },
                {
                    element: "lung",
                    text: "ç—°å¤šï¼Œæ˜“å’³å—½"
                },
                
                // è‚¾ï¼ˆæ°´ï¼‰3é¢˜
                {
                    element: "kidney",
                    text: "è™«ç‰™è¾ƒå¤šï¼Œéª¨éª¼è„†å¼±"
                },
                {
                    element: "kidney",
                    text: "å®¹æ˜“æ˜¾è€"
                },
                {
                    element: "kidney",
                    text: "å†¬å¤©èº«ä½“å¾ˆå‡‰"
                }
            ],
            // ç¬¬5è½®
            [
                // è‚ï¼ˆæœ¨ï¼‰3é¢˜
                {
                    element: "liver",
                    text: "å¶å°”ç—›ç»"
                },
                {
                    element: "liver",
                    text: "å°è…¹ä¸¤ä¾§å’Œèƒ¸éƒ¨ç»å¸¸é…¸ç—›"
                },
                {
                    element: "liver",
                    text: "å®¹æ˜“æ„Ÿåˆ°ç„¦è™‘"
                },
                
                // å¿ƒï¼ˆç«ï¼‰3é¢˜
                {
                    element: "heart",
                    text: "æ‹…å¿ƒè„¸ä¸Šä¼šæœ‰è‰²æ–‘å’Œæš—æ²‰"
                },
                {
                    element: "heart",
                    text: "é«˜è¡€å‹æˆ–ä½è¡€å‹"
                },
                {
                    element: "heart",
                    text: "èˆŒè‹”ä¸Šæœ‰é»‘è‰²çš„æ–‘ç‚¹"
                },
                
                // è„¾ï¼ˆåœŸï¼‰3é¢˜
                {
                    element: "spleen",
                    text: "ç»å¸¸çƒ¦ç‡¥ï¼Œå®¹æ˜“å¯¹äº‹æƒ…è€¿è€¿äºæ€€"
                },
                {
                    element: "spleen",
                    text: "é›¨å¤©ä¼šè§‰å¾—å…¨èº«ä¸èˆ’æœ"
                },
                {
                    element: "spleen",
                    text: "æœˆç»æ—¶é—´é•¿ï¼Œç»å¸¸æ–­æ–­ç»­ç»­ä¸å¹²å‡€"
                },
                
                // è‚ºï¼ˆé‡‘ï¼‰3é¢˜
                {
                    element: "lung",
                    text: "å–œæ¬¢è¾›è¾£çš„é£Ÿç‰©"
                },
                {
                    element: "lung",
                    text: "ç»å¸¸æ‚£é¼»ç‚æˆ–æ˜¯æµé¼»æ¶•"
                },
                {
                    element: "lung",
                    text: "å­£èŠ‚å˜åŒ–æ—¶å¾ˆå®¹æ˜“å¼•å‘æ„Ÿå†’"
                },
                
                // è‚¾ï¼ˆæ°´ï¼‰3é¢˜
                {
                    element: "kidney",
                    text: "æ˜æ˜è¿˜æ²¡åˆ°æ›´å¹´æœŸï¼Œä½†å·²ç»å‡ºç°ç›¸å…³ç—‡çŠ¶äº†"
                },
                {
                    element: "kidney",
                    text: "ç»å¸¸ä¸Šå•æ‰€"
                },
                {
                    element: "kidney",
                    text: "æ‰‹è„šå’Œè„¸éƒ¨ç»å¸¸æ°´è‚¿"
                }
            ]
        ];
        
        // å…ƒç´ ä¿¡æ¯
        const elements = {
            liver: { name: "è‚ï¼ˆæœ¨ï¼‰", color: "#4CAF50", icon: "ğŸŒ³" },
            heart: { name: "å¿ƒï¼ˆç«ï¼‰", color: "#F44336", icon: "ğŸ”¥" },
            spleen: { name: "è„¾ï¼ˆåœŸï¼‰", color: "#FFC107", icon: "â›°ï¸" },
            lung: { name: "è‚ºï¼ˆé‡‘ï¼‰", color: "#9E9E9E", icon: "ğŸ’" }, // æ”¹ä¸ºçŸ¿çŸ³å›¾æ ‡
            kidney: { name: "è‚¾ï¼ˆæ°´ï¼‰", color: "#2196F3", icon: "ğŸ’§" }
        };
        
        // åˆå§‹åŒ–å˜é‡
        let currentRound = 0;
        const userAnswers = Array(questionsData.length).fill().map(() => []);
        const scores = {
            liver: 0,
            heart: 0,
            spleen: 0,
            lung: 0,
            kidney: 0
        };
        
        // DOM å…ƒç´ 
        const questionsContainer = document.getElementById('questions-container');
        const roundNumber = document.getElementById('round-number');
        const roundTitle = document.getElementById('round-title');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const testSection = document.getElementById('test');
        const resultSection = document.getElementById('result');
        
        // åˆå§‹åŒ–æµ‹è¯•
        function initTest() {
            loadRoundQuestions(currentRound);
            updateProgress();
        }
        
        // åŠ è½½å½“å‰è½®æ¬¡çš„é¢˜ç›®
        function loadRoundQuestions(roundIndex) {
            roundNumber.textContent = roundIndex + 1;
            roundTitle.textContent = `ç¬¬${roundIndex + 1}è½®ï¼š${getRoundTitle(roundIndex)}`;
            questionsContainer.innerHTML = '';
            
            // æŒ‰å…ƒç´ åˆ†ç»„
            const questionsByElement = {
                liver: [],
                heart: [],
                spleen: [],
                lung: [],
                kidney: []
            };
            
            // å°†å½“å‰è½®æ¬¡çš„é—®é¢˜æŒ‰å…ƒç´ åˆ†ç»„
            questionsData[roundIndex].forEach(question => {
                questionsByElement[question.element].push(question);
            });
            
            // ä¸ºæ¯ä¸ªå…ƒç´ åˆ›å»ºé¢˜ç›®ç»„
            for (const element in questionsByElement) {
                if (questionsByElement[element].length > 0) {
                    const elementInfo = elements[element];
                    
                    const elementGroup = document.createElement('div');
                    elementGroup.className = 'element-group';
                    
                    const titleDiv = document.createElement('div');
                    titleDiv.className = `element-title ${element}`;
                    titleDiv.innerHTML = `
                        <span class="element-icon">${elementInfo.icon}</span>
                        <span>${elementInfo.name}</span>
                        <div class="element-explanation">${getElementExplanation(element)}</div>
                    `;
                    
                    const questionsDiv = document.createElement('div');
                    questionsDiv.className = 'element-questions';
                    
                    questionsByElement[element].forEach((question, qIndex) => {
                        const questionDiv = document.createElement('div');
                        questionDiv.className = 'question';
                        questionDiv.innerHTML = `
                            <input type="checkbox" id="q${roundIndex}-${element}-${qIndex}" 
                                   data-round="${roundIndex}" 
                                   data-element="${element}"
                                   data-qindex="${qIndex}">
                            <label for="q${roundIndex}-${element}-${qIndex}">${question.text}</label>
                        `;
                        
                        // æ¢å¤ä¹‹å‰çš„é€‰æ‹©
                        const checkbox = questionDiv.querySelector('input');
                        if (userAnswers[roundIndex][`${element}-${qIndex}`]) {
                            checkbox.checked = true;
                        }
                        
                        questionsDiv.appendChild(questionDiv);
                    });
                    
                    elementGroup.appendChild(titleDiv);
                    elementGroup.appendChild(questionsDiv);
                    questionsContainer.appendChild(elementGroup);
                }
            }
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            prevBtn.disabled = (roundIndex === 0);
            
            if (roundIndex === questionsData.length - 1) {
                nextBtn.innerHTML = 'æŸ¥çœ‹ç»“æœ <i class="fas fa-chart-bar"></i>';
            } else {
                nextBtn.innerHTML = 'ä¸‹ä¸€è½® <i class="fas fa-arrow-right"></i>';
            }
        }
        
        // è·å–è½®æ¬¡æ ‡é¢˜
        function getRoundTitle(roundIndex) {
            const titles = [
                "äº”è¡ŒåŸºç¡€èƒ½é‡è¯„ä¼°",
                "æƒ…ç»ªä¸ç”Ÿç†ç‰¹å¾è¯„ä¼°",
                "é¥®é£Ÿä¹ æƒ¯ä¸æ„Ÿå®˜ç‰¹å¾",
                "èº«ä½“éƒ¨ä½ä¸å­£èŠ‚ååº”",
                "ç»†èŠ‚ç‰¹å¾ä¸é•¿æœŸè¡¨ç°"
            ];
            return titles[roundIndex];
        }
        
        // è·å–å…ƒç´ è§£é‡Š
        function getElementExplanation(element) {
            const explanations = {
                liver: "ä¸»ç–æ³„ï¼Œä¸æƒ…ç»ªã€çœ¼ç›ã€æŒ‡ç”²ç›¸å…³",
                heart: "ä¸»è¡€è„‰ï¼Œä¸æƒ…ç»ªã€ç¡çœ ã€é¢éƒ¨ç›¸å…³",
                spleen: "ä¸»è¿åŒ–ï¼Œä¸æ¶ˆåŒ–ã€è‚Œè‚‰ã€å£å‘³ç›¸å…³",
                lung: "ä¸»æ°”ï¼Œä¸çš®è‚¤ã€å‘¼å¸ã€æ¯›å‘ç›¸å…³",
                kidney: "ä¸»è—ç²¾ï¼Œä¸éª¨éª¼ã€å¤´å‘ã€è€åŒ–ç›¸å…³"
            };
            return explanations[element];
        }
        
        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            const progress = ((currentRound + 1) / questionsData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }
        
        // ä¿å­˜å½“å‰è½®æ¬¡ç­”æ¡ˆ
        function saveRoundAnswers() {
            const checkboxes = document.querySelectorAll(`input[data-round="${currentRound}"]`);
            checkboxes.forEach(checkbox => {
                const element = checkbox.getAttribute('data-element');
                const qIndex = checkbox.getAttribute('data-qindex');
                const key = `${element}-${qIndex}`;
                userAnswers[currentRound][key] = checkbox.checked;
            });
        }
        
        // è®¡ç®—æ€»åˆ†
        function calculateScores() {
            // é‡ç½®åˆ†æ•°
            Object.keys(scores).forEach(key => scores[key] = 0);
            
            // è®¡ç®—æ¯ä¸ªé¢˜ç›®çš„åˆ†æ•°
            userAnswers.forEach((roundAnswers, roundIndex) => {
                for (const key in roundAnswers) {
                    if (roundAnswers[key]) {
                        const element = key.split('-')[0];
                        scores[element]++;
                    }
                }
            });
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResults() {
            calculateScores();
            
            // æ‰¾å‡ºä¸»å¯¼å…ƒç´ 
            let maxScore = 0;
            let dominantElement = '';
            
            Object.entries(scores).forEach(([element, score]) => {
                if (score > maxScore) {
                    maxScore = score;
                    dominantElement = element;
                }
            });
            
            // æ›´æ–°ä¸»å¯¼å…ƒç´ æ˜¾ç¤º
            document.getElementById('dominant-element').textContent = elements[dominantElement].name;
            
            // åˆ›å»ºé›·è¾¾å›¾
            createRadarChart();
            
            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            testSection.style.display = 'none';
            resultSection.style.display = 'block';
        }
        
        // åˆ›å»ºé›·è¾¾å›¾
        function createRadarChart() {
            const ctx = document.getElementById('radar-chart').getContext('2d');
            
            // å¦‚æœå·²æœ‰å›¾è¡¨å®ä¾‹ï¼Œå…ˆé”€æ¯
            if (window.radarChart) {
                window.radarChart.destroy();
            }
            
            // è®¡ç®—æœ€å¤§åˆ†æ•°å€¼
            const maxValue = Math.max(
                5, 
                scores.liver, 
                scores.heart, 
                scores.spleen, 
                scores.lung, 
                scores.kidney
            );
            
            // åˆ›å»ºæ–°å›¾è¡¨
            window.radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: [
                        elements.liver.name,
                        elements.heart.name,
                        elements.spleen.name,
                        elements.lung.name,
                        elements.kidney.name
                    ],
                    datasets: [{
                        label: 'äº”è¡Œèƒ½é‡å€¼',
                        data: [
                            scores.liver,
                            scores.heart,
                            scores.spleen,
                            scores.lung,
                            scores.kidney
                        ],
                        backgroundColor: 'rgba(142, 59, 28, 0.1)',
                        borderColor: '#8e3b1c',
                        pointBackgroundColor: [
                            elements.liver.color,
                            elements.heart.color,
                            elements.spleen.color,
                            elements.lung.color,
                            elements.kidney.color
                        ],
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#8e3b1c',
                        borderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            pointLabels: {
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                color: '#555'
                            },
                            min: 0,
                            max: maxValue + 1,
                            ticks: {
                                stepSize: 1,
                                backdropColor: 'transparent',
                                color: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `å¾—åˆ†: ${context.raw}`;
                                }
                            }
                        }
                    },
                    elements: {
                        line: {
                            tension: 0.1
                        }
                    },
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    }
                }
            });
        }
        
        // äº‹ä»¶ç›‘å¬
        prevBtn.addEventListener('click', () => {
            saveRoundAnswers();
            currentRound--;
            loadRoundQuestions(currentRound);
            updateProgress();
        });
        
        nextBtn.addEventListener('click', () => {
            saveRoundAnswers();
            
            if (currentRound < questionsData.length - 1) {
                currentRound++;
                loadRoundQuestions(currentRound);
                updateProgress();
            } else {
                showResults();
            }
        });
        
        document.getElementById('retry-btn').addEventListener('click', () => {
            // é‡ç½®æ‰€æœ‰çŠ¶æ€
            currentRound = 0;
            Object.keys(scores).forEach(key => scores[key] = 0);
            userAnswers.forEach((round, i) => {
                userAnswers[i] = {};
            });
            
            // éšè—ç»“æœï¼Œæ˜¾ç¤ºæµ‹è¯•
            resultSection.style.display = 'none';
            testSection.style.display = 'block';
            
            // é‡æ–°åŠ è½½ç¬¬ä¸€è½®
            loadRoundQuestions(0);
            updateProgress();
        });
        
        // åˆå§‹åŒ–æµ‹è¯•
        window.addEventListener('DOMContentLoaded', initTest);
    </script>
</body>
</html>